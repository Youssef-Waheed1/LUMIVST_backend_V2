# ุฏููู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ุฅูู PostgreSQL

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุงุณุชูุฑุงุฏ ููู CSV ุงูุฎุงุต ุจุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ููุฃุณูู ุงูุณุนูุฏูุฉ (2001-2025) ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL.

---

## โ ุงููุชุทูุจุงุช ุงูุฃูููุฉ

1. **PostgreSQL** ูุซุจุช ููุนูู
2. **Python 3.8+** ูุซุจุช
3. **Dependencies** ุงููุทููุจุฉ (ููุฌูุฏุฉ ูู `requirements.txt`)

---

## ๐ ุฎุทูุงุช ุงูุงุณุชูุฑุงุฏ

### ุงูุฎุทูุฉ 1: ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL

```powershell
# ุชุญูู ูู ุชุดุบูู PostgreSQL
Get-Service -Name postgresql*
```

### ุงูุฎุทูุฉ 2: ุถุน ููู CSV ูู ููุงู ูุนุฑูู

ุงูุณุฎ ููู CSV ุงูุฎุงุต ุจู (ูุซูุงู `historical_data.csv`) ูู ูุฌูุฏ ูุนุฑูู:
```
ูุซุงู: D:\Data\historical_data.csv
```

### ุงูุฎุทูุฉ 3: ูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ

```powershell
cd d:\Work\LUMIVST\backend
.\venv\Scripts\Activate.ps1
```

### ุงูุฎุทูุฉ 4: ุดุบูู ุณูุฑูุจุช ุงูุงุณุชูุฑุงุฏ

```powershell
python scripts\import_csv_to_db.py "D:\Data\historical_data.csv"
```

ุฃู ุฅุฐุง ูุงู ุงูููู ูู ูุฌูุฏ ุขุฎุฑ:
```powershell
python scripts\import_csv_to_db.py "C:\Users\USER\Desktop\stock_data.csv"
```

---

## ๐ ูุงุฐุง ููุนู ุงูุณูุฑูุจุชุ

1. โ **ููุฑุฃ ููู CSV** ูููุชุดู encoding ุชููุงุฆููุง
2. โ **ููุธู ุงูุจูุงูุงุช**:
   - ูุญูู ุงูุชูุงุฑูุฎ ูู DD/MM/YYYY ุฅูู ุชูุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุฒูู ุงูููุงุตู ูู ุงูุฃุฑูุงู (ูุซูุงู: `1,234,567` โ `1234567`)
   - ูุญุฐู ุงูุตููู ุงููุงุฑุบุฉ
3. โ **ูุณุชูุฑุฏ ุงูุจูุงูุงุช ุนูู ุฏูุนุงุช** (1000 ุตู ูู ุงููุฑุฉ)
4. โ **ูุชุฌูุจ ุงูุชูุฑุงุฑ**: ุฅุฐุง ูุงู ุงูุณูู ูู ููุณ ุงูุชุงุฑูุฎ ููุฌูุฏุ ูุญุฏุซู ุจุฏูุงู ูู ุฅุถุงูุชู
5. โ **ูุนุฑุถ ุชูุฏู ุงูุนูููุฉ** ูุน ุฅุญุตุงุฆูุงุช ุญูุฉ

---

## ๐ ูุซุงู ุนูู ุงูุชูููุฐ

```
๐ ูุฑุงุกุฉ ุงูููู: D:\Data\historical_data.csv
๐ ุนุฏุฏ ุงูุตููู: 2,547,896
๐ ุงูุฃุนูุฏุฉ: ['Industry Group', 'Symbol', 'Company Name', 'Date', 'Open', 'High', 'Low', 'Close', 'Change', '% Change', 'Volume Traded', 'Value Traded (SAR)', 'No. of Trades']
๐งน ุชูุธูู ุงูุจูุงูุงุช...
โ ุงูุจูุงูุงุช ูุธููุฉ: 2,547,896 ุตู ุฌุงูุฒ ููุงุณุชูุฑุงุฏ
๐ง ุฅูุดุงุก ุงูุฌุฏุงูู...
๐พ ุจุฏุก ุงูุงุณุชูุฑุงุฏ (ุฏูุนุงุช ูู 1000 ุตู)...
   โณ 1,000 / 2,547,896 (0.0%) - ูุถุงู: 1,000, ูุญุฏุซ: 0, ุฃุฎุทุงุก: 0
   โณ 2,000 / 2,547,896 (0.1%) - ูุถุงู: 2,000, ูุญุฏุซ: 0, ุฃุฎุทุงุก: 0
   ...
   โณ 2,547,896 / 2,547,896 (100.0%) - ูุถุงู: 2,547,896, ูุญุฏุซ: 0, ุฃุฎุทุงุก: 0

============================================================
โ ุงูุชูู ุงูุงุณุชูุฑุงุฏ ุจูุฌุงุญ!
๐ ุงูุฅุญุตุงุฆูุงุช:
   โข ุฅุฌูุงูู ุงูุตููู ุงููุนุงูุฌุฉ: 2,547,896
   โข ุณุฌูุงุช ุฌุฏูุฏุฉ: 2,547,896
   โข ุณุฌูุงุช ูุญุฏุซุฉ: 0
   โข ุฃุฎุทุงุก: 0
============================================================

๐ ุฅุญุตุงุฆูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   โข ุฅุฌูุงูู ุงูุณุฌูุงุช: 2,547,896
   โข ุนุฏุฏ ุงูุฃุณูู: 245
   โข ุงููุทุงู ุงูุฒููู: 2001-01-01 ุฅูู 2025-12-26
```

---

## ๐ง ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ูุดููุฉ: "The term 'python' is not recognized"
**ุงูุญู**: ุชุฃูุฏ ูู ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ:
```powershell
.\venv\Scripts\Activate.ps1
```

### ูุดููุฉ: "could not connect to server"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL:
```powershell
Start-Service postgresql-x64-*
```

### ูุดููุฉ: "permission denied"
**ุงูุญู**: ุดุบูู PowerShell ูู Administrator

### ูุดููุฉ: ุชูุงุฑูุฎ ุฎุงุทุฆุฉ
**ุงูุญู**: ุงูุณูุฑูุจุช ูุฏุนู ุตูุบ ูุชุนุฏุฏุฉ:
- `DD/MM/YYYY`
- `MM/DD/YYYY`
- `YYYY-MM-DD`

ุฅุฐุง ูุงู ุงูุชูุณูู ูุฎุชููุ ุนุฏูู function `parse_date` ูู ุงูุณูุฑูุจุช.

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุนุฏ ุงูุงุณุชูุฑุงุฏ

ุจุนุฏ ุงูุชูุงู ุงูุงุณุชูุฑุงุฏ ุจูุฌุงุญ:

1. โ **ุงุญุณุจ RS ููุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ**:
   ```powershell
   python scripts\calculate_rs_historical.py
   ```

2. โ **ุชุญูู ูู ุงูุจูุงูุงุช**:
   ```powershell
   python scripts\verify_data.py
   ```

3. โ **ูุนูู ุงูุชุญุฏูุซ ุงููููู** (ุณูุชู ุนููู ูุงุญูุงู)

---

## ๐ ูููู ุฌุฏูู prices

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | Integer | Primary Key |
| `symbol` | String(10) | ุฑูุฒ ุงูุณูู (ูุซูุงู: 1010) |
| `company_name` | String(200) | ุงุณู ุงูุดุฑูุฉ |
| `industry_group` | String(100) | ุงููุทุงุน |
| `date` | Date | ุชุงุฑูุฎ ุงูุชุฏุงูู |
| `open` | Numeric(12,2) | ุณุนุฑ ุงูุงูุชุชุงุญ |
| `high` | Numeric(12,2) | ุฃุนูู ุณุนุฑ |
| `low` | Numeric(12,2) | ุฃุฏูู ุณุนุฑ |
| `close` | Numeric(12,2) | ุณุนุฑ ุงูุฅุบูุงู |
| `change` | Numeric(12,2) | ุงูุชุบูุฑ |
| `change_percent` | Numeric(8,4) | ูุณุจุฉ ุงูุชุบูุฑ % |
| `volume_traded` | BigInteger | ุงููููุฉ ุงููุชุฏุงููุฉ |
| `value_traded_sar` | Numeric(18,2) | ุงููููุฉ ุงููุชุฏุงููุฉ (ุฑูุงู) |
| `no_of_trades` | Integer | ุนุฏุฏ ุงูุตููุงุช |
| `created_at` | DateTime | ููุช ุงูุฅูุดุงุก |
| `updated_at` | DateTime | ููุช ุขุฎุฑ ุชุญุฏูุซ |

---

## ๐ก ูุตุงุฆุญ ููุฃุฏุงุก

- **Batch Size**: ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 1000 ุตูุ ูููู ุชุบููุฑูุง:
  ```powershell
  python scripts\import_csv_to_db.py "file.csv" 5000
  ```

- **ููููุงุช ูุจูุฑุฉ ุฌุฏุงู**: ูุณูู ุงูููู ุฅูู ุนุฏุฉ ูููุงุช ุฃุตุบุฑ

- **Indexes**: ุชููุดุฃ ุชููุงุฆูุงู ุนูู:
  - `symbol`
  - `date`
  - `(symbol, date)` - ูุฑูุจ ูุฑูุฏ

---

## โ ุฌุงูุฒ!

ุจุนุฏ ุงูุชูุงู ุงูุงุณุชูุฑุงุฏุ ุฃุตุจุญุช ุงูุขู ุฌุงูุฒุงู ูู:
- ุญุณุงุจ RS
- ุจูุงุก API Endpoints
- ุนุฑุถ ุงูุจูุงูุงุช ูู Next.js

**ุงูุฎุทูุฉ ุงูุชุงููุฉ**: ุญุณุงุจ RS ููุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ๐
